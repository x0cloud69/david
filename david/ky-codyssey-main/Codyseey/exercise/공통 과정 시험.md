# [공통 시험 3번] read_log()

## read_log 함수
- 'try-except'만 처리! (FileNotFoundError, UnicodeDecodeError, Exception)

## main 함수 

> [!Step 1]
> 0. **try-except**부터 시작!
> 1. main() 생성 후 try로 덮고 read_log()를 가져옴 (변수 처리)
> 
> ```python
> log = read_log() #원본 파일 
> print(log)
> ```

-----

> [!Step 2]
> > 
> > 2. 가져온(log )파일을 strip().splitlines()로 한 줄씩 나눔
> > ``` lines = log.strip().splitlines() ```
> > 
	== 예외 처리1: (조건: header 명칭이 일치한지 검증 )==<<
> [!NOTE]
> 
>  2-1. lines가 아니거나 " lines[0] " 즉, 헤더가 특정 단어와 다를 경우 ValueError
>  
> ```python
> lines = log.strip().splitlines() #파일 나누기
> 
> 	if not lines or lines[0] != timestamp,event,message': #명칭 예외처리
> 		raise ValueError
> ```
>

-----

``` == 예외 처리2: (조건: ','(콤마) 기준 3개가 맞는지 검증 ) ==```

> [!Step 3]
>  - 신규 리스트 하나 생성 (append로 담을 리스트)
> - lines를 **1번(내용)부터** for문으로 나눠 **maxsplit**으로 변수처리
> - **len(parts) 즉, 콤마로 나눴을때 3**이 아닐 경우 ValueError
> - 마지막: 콤마(,)로 나눈 3개 데이터를 각 변수에 할당
> - > [!Code]
>
> ```python
> pairs = list()
> 
>         for line in lines[1:]:
>             parts = line.strip().split(',', 2)
> 
>             if len(parts) != 3:
>                 raise ValueError
>                 
>             time, _, mess = parts
> ```


> [!NOTE]
> 4.  [for문 안에서] "time"의 길이를 검증하고 '19'가 맞으면, append
> ```python
> if len(time) == 19:
> 	pairs.append(time, mess)
> 	print(pairs)
> else:
> 	raise ValueError	
> ```
> 

### [ 3, 4번 전체 코드 ]

```python

#3번, 3-1번, 4번 코드

	for line in lines[1:]:  ##3번 내용
		parts = line.split(',', 2) #
		
		if len(parts) != 3:
			raise ValueError
	
	time, _, mess = parts
	
	len(time) == 19:
	pairs.append(time, mess)
	print(pairs)		

else: 
	raise ValueError
```


----

### 변환 처리

> [!NOTE]
> 
> 5. **sorted, dict를 try문으로 묶고 시작** [자체 예외처리 후 자체 출력 (processing error)] return
> ```python
> try:
> 	sorted_pairs = sorted(time, key=lambda time:item[0], reverse = True)
> 	result_dict = dict(sorted)
> 	print(sorted_pairs)
> 	print(result_dict)
> except:
> 	print('Processing error.')
> 	return #<<무조건 모든 종료 시에는 [ return ] 필수로 기재
> ```

6. # 메인문 예외처리 확인! 
- FileNotFoundError, UnicodeDecodeError, ValueError, Exception
